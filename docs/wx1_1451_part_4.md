# Deploying your Customization

## 4.1 - 4.6 Deployment via Control Hub

### 4.1 Setting and using tags to filter devices

!!! abstract

    Device Tags are one of the most underutilized features for sorting and filtering devices. 
    Not only are tags useful in Control Hub, but they are also extremely beneficial when working 
    with the Webex RESTful APIs, providing one of the most effective ways to filter devices.

!!! Tip
    
    Add as many tags in this exercise as you please. They will help you identify your pod's device
    in later labs. Hint a pod<yourPodNumber> tag may be handy. In the real world you could add a tag for 
    each of the following: Country, State, City, Building, Room, Product. Using tags in the manner 
    gives you better control over deployments. Imagine an issue is occuring but only on Room Bars. Now
    you have a tag to run a command using CE-Deploy(which you will see in a later lab) that will 
    only affect those devices.

??? Webex "4.1 Exercises"

    4.1.1 Login to the lab's Control Hub with your admin credentials
    
    4.1.2 Select Management>Devices
    
    <figure markdown="span">
      ![Device Management](assets%2Fwx1_1451_part_4%2F4-1-2.png){ width="150" }
      <figcaption></figcaption>
    </figure>
    
    4.1.3 Select your lab device(Room Bar or Desk Pro)
    
    <figure markdown="span">
      ![Device Selection](assets%2Fwx1_1451_part_4%2F4-1-3.png){ width="400" }
      <figcaption></figcaption>
    </figure>
    
    4.1.4 Select ==Edit==
    
    <figure markdown="span">
      ![Edit](assets%2Fwx1_1451_part_4%2F4-1-4.png){ width="100" }
      <figcaption></figcaption>
    </figure>
    
    4.1.5 The Edit tag page will now allow you to set as many tags as you need. 
    For this lab we will be using the tag ==wbx<yourPodNumber>==. As an example wbx101.
    
    <figure markdown="span">
      ![Add Tag](assets%2Fwx1_1451_part_4%2F4.1.5.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.1.6 Select Add tag
    
    <figure markdown="span">
      ![Edit tag](assets%2Fwx1_1451_part_4%2F4-1-6.png){ width="300" }
      <figcaption>Edit tag</figcaption>
    </figure>
    
    4.1.7 Add wbx<YourPodNumber> and press enter
    
    <figure markdown="span">
      ![wbxXXX](assets%2Fwx1_1451_part_4%2F4-1-7.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.1.8 Select ==Close== to close the Edit tags page.
    
    4.1.9 Close the edit configurations popout and return to the main devices page.
    
    4.1.10 In the Find by devices dialog box type Tags: then enter the device tag previously set.
    
    <figure markdown="span">
      ![Search](assets%2Fwx1_1451_part_4%2F4-1-10a.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    <figure markdown="span">
      ![wbx Tag search](assets%2Fwx1_1451_part_4%2F4-1-10b.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        While this may seem rather insignificant with just one or two devices, if you where deploying 
        100's or 1000's of endpoints this just makes finding your group of endpoints a whole lot easier. 
        In a later lab we will use the wbx1 tag to do a deployment via the Rest API. This concludes 
        deployment lab one. Now on to using templates.

### 4.2 Building and deploying configuration templates via Control Hub

!!! abstract

    One of the easiest and most effective ways to deploy a series of configuration changes to 
    RoomOS devices is through configuration templates. In this lab, we will explore deploying 
    configurations using both device-based and organization-based templates. In this lab we are 
    going to create a template to set the volume of you device and enable macros for the Macro 
    deployment lab. 

??? webex "4.2 Exercise"

    4.2.1 Login to control hub with your lab admin credentials
    
    4.2.2 Select Management>Devices
    
    <figure markdown="span">
      ![Devices](assets%2Fwx1_1451_part_4%2F4-1-2.png){ width="150" }
      <figcaption></figcaption>
    </figure>
    
    4.2.3 Select Templates
    
    <figure markdown="span">
      ![Templates](assets%2Fwx1_1451_part_4%2F4-2-3.png){ width="100" }
      <figcaption></figcaption>
    </figure>
    
    
    
    4.2.4 Select Create template
    
    <figure markdown="span">
      ![Create Templates](assets%2Fwx1_1451_part_4%2F4-2-4.png){ width="100" }
      <figcaption></figcaption>
    </figure>
    
    4.2.5 Name your template Wbx1LabTemplate<yourPodNumber> and select Next. 
    For example Wbx1LabTemplate101.
    
    <figure markdown="span">
      ![Name Template](assets%2Fwx1_1451_part_4%2F4-2-5.png){ width="300" }
    </figure>
    
    4.2.6 In the Search by configuration name type volume
    
    <figure markdown="span">
      ![Search Volume](assets%2Fwx1_1451_part_4%2F4-2-6.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.2.7 Select Audio>Default Volume
    
    4.2.8 Change the Default Volume to 60
    
    <figure markdown="span">
      ![Default Volume](assets%2Fwx1_1451_part_4%2F4-2-8.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.2.9 Once you have set Audio to 60 select "All" to go back to the configuration search
    
    4.2.10 In the Search by configuration name type Macro
    
    <figure markdown="span">
      ![Type Macro](assets%2Fwx1_1451_part_4%2F4-2-10.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.2.11 Change the Mode from Off to On and then select Next
    
    <figure markdown="span">
      ![4-2-11.png](assets%2Fwx1_1451_part_4%2F4-2-11.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.2.12 Review your new template and select Create
    
    4.2.13 Now that we have created a new template lets apply it to our device. Select Go to Devices
    
    <figure markdown="span">
      ![Go To Devices](assets%2Fwx1_1451_part_4%2F4-2-13.png){ width="100" }
      <figcaption></figcaption>
    </figure>
    
    4.2.14 Select your lab device(Room Bar or Desk Pro)
    
    <figure markdown="span">
      ![Select Lab Device](assets%2Fwx1_1451_part_4%2F4-2-14.png){ width="400" }
      <figcaption></figcaption>
    </figure>
    
    4.2.15 Select Edit
    
    <figure markdown="span">
      ![Edit](assets%2Fwx1_1451_part_4%2F4-2-15.png){ width="100" }
      <figcaption></figcaption>
    </figure>
    
    4.2.16 Select Configuration templates
    
    <figure markdown="span">
      ![Configuration Templates](assets%2Fwx1_1451_part_4%2F4-2-16.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.2.17 From the template dropdown select the Wbx1LabTemplateXXX and review your settings
    
    <figure markdown="span">
      ![Template Selection](assets%2Fwx1_1451_part_4%2F4-2-17.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.2.18 Select Next and then Apply
    
    4.2.19 Review the successful deployment of your configurations and select close
    
    <figure markdown="span">
      ![Success](assets%2Fwx1_1451_part_4%2F4-2-19.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Well done. This lab section is now complete.

### 4.3 Building and deploying Org-Wide configuration templates via Control Hub

!!! abstract

    In the last lab, we built device-specific configuration templates that can be deployed to 
    specific endpoints or groups of selected endpoints. We can make this easier by building a 
    hierarchy of settings that allows us to control these settings at an organization or 
    location level.

!!! Tip
    
    You can set configuration defaults for the whole organization, 
    or for an individual location. These configurations are applied automatically to all devices 
    that are enrolled in an organization, or set to a specific location. This helps you to manage 
    configuration consistency across devices. When default configurations are applied, you can still
    configure an individual device or a set of devices if needed.

??? webex "4.3 Exercises"

    4.3.1 Login to control hub with your lab admin credentials
    
    4.3.2 Select Management>Devices>Settings>Configuration Defaults
    
    <figure markdown="span">
      ![Select Devices](assets%2Fwx1_1451_part_4%2F4-1-2.png){ width="150" }
      <figcaption></figcaption>
    </figure>
    
    <figure markdown="span">
      ![Configuration Details](assets%2Fwx1_1451_part_4%2F4-3-2b.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.3.3 Select Open org-wide defaults
    
    4.3.4 You may notice there are already some defaults provisioned, 
    we are going to select Add configurations
    
    <figure markdown="span">
      ![Add](assets%2Fwx1_1451_part_4%2F4-3-4.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    
    
    4.3.5 This presents a similar configuration selection as device templates. 
    For our org-wide template we are just going 
    to set the Macro mode. In the Search by configuration name type Macro
    
    <figure markdown="span">
      ![Find Macro](assets%2Fwx1_1451_part_4%2F4-3-5.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.3.6 Change the Mode from Off to On and select Next
    
    <figure markdown="span">
      ![Change Macro Setting](assets%2Fwx1_1451_part_4%2F4-3-6.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.3.7 Review the changes and select **Cancel** changes. Our lab environment contains multiple pods
    so applying the change is not possible for this configuration.
    
    <figure markdown="span">
      ![Cancel Changes](assets%2Fwx1_1451_part_4%2F4-3-7.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Congrats you have now viewed an org-wide configuration template. Now every time a new 
        device is added to this organization by default the settings from org-wide defaults will be applied.
        be set to on unless a more specific location or device configuration supersedes it.
    
        <figure markdown="span">
            ![Congrats](assets%2Fwx1_1451_part_4%2F4-3-8.png){ width="300" }
            <figcaption></figcaption>
        </figure>

### 4.4 Running xAPI commands via Control Hub

!!! abstract

    Running xAPI commands in Control Hub can be done on and endpoint by endpoint basis. In this lab 
    you will execute a simple xAPI command to get the system time to get an understanding how to 
    execute and find a command. In the next lab we will follow that up with deploying extensions 
    in a similar fashion.

??? webex "4.4 Exercises"
    
    4.4.1 Login to control hub with your lab admin credentials
    
    4.4.2 Select Management>Devices
    
    <figure markdown="span">
      ![Select Devices](assets%2Fwx1_1451_part_4%2F4-1-2.png){ width="150" }
      <figcaption></figcaption>
    </figure>
    
    4.4.3 Right-click on your lab device, no need to highlight the checkbox 
    this time(Room Bar or Desk Pro)
    
    4.4.4 Select Actions and Run xCommand
    
    <figure markdown="span">
      ![Run xCommand](assets%2Fwx1_1451_part_4%2F4-4-4.png){ width="200" }
      <figcaption></figcaption>
    </figure>
    
    4.4.5 Type time into the search for a command name text box. Select Time>DateTime
    
    <figure markdown="span">
      ![Select Time](assets%2Fwx1_1451_part_4%2F4-4-5.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.4.6 Select Get from the two options for DateTime
    
    <figure markdown="span">
      ![Select Get](assets%2Fwx1_1451_part_4%2F4-4-6.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.4.7 Select Execute
    
    <figure markdown="span">
      ![Execute](assets%2Fwx1_1451_part_4%2F4-4-7.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Well done. While this is a simple example we will dive a little deeper next with using 
        the same method to deploy extensions so don’t stray to far. Cancel out the Time > DateTime > Get 
        text in the search bar by using the x button on the left hand side of the text box.

### 4.5 Deploy Extensions via Control Hub

!!! abstract

    Adding custom buttons can be achieved in several ways, including via the API, embedded in a macro
    , the web admin portal on the device, Control Hub, or CE-Deploy. Regardless of the method you 
    choose, all approaches yield the same outcome. In our labs, we will try using Control Hub and 
    then CE-Deploy.

??? webex "4.5 Exercises"

    4.5.1 In the clear search box for Run xCommands type UserInterface > Extensions >Panel and select 
    the Save option
    
    <figure markdown="span">
      ![Extensions](assets%2Fwx1_1451_part_4%2F4-5-1.png){ width="325" }
      <figcaption></figcaption>
    </figure>
    
    4.5.2 This will open the Save Arguments dialog
    
    <figure markdown="span">
      ![Save](assets%2Fwx1_1451_part_4%2F4-5-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.5.3 Use Post_Meeting_Survey as the PanelId. Open Post_Meeting_Survey.xml or copy the xml below in a 
    text editor then copy and paste the Post_Meeting_Survey.xml text into the Body section.
    
    ```xml title="Post_Meeting_Survey_Macro.xml" linenums="1"
    <Extensions>
        <Version>1.11</Version>
        <Panel>
            <Order>14</Order>
            <PanelId>Post_Meeting_Survey</PanelId>
            <Location>Hidden</Location>
            <Icon>Lightbulb</Icon>
            <Name>Post Meeting Survey</Name>
            <ActivityType>Custom</ActivityType>
            <Page>
                <Name>Post Meeting Survey</Name>
                <Row>
                    <Name>Overall Rating</Name>
                    <Widget>
                        <WidgetId>post_overall_text</WidgetId>
                        <Name>- - - - -</Name>
                        <Type>Text</Type>
                        <Options>size=2;fontSize=normal;align=center</Options>
                    </Widget>
                    <Widget>
                        <WidgetId>post_overall_change</WidgetId>
                        <Name>Change</Name>
                        <Type>Button</Type>
                        <Options>size=2</Options>
                    </Widget>
                </Row>
                <Row>
                    <Name>Audio Quality</Name>
                    <Widget>
                        <WidgetId>post_Audio</WidgetId>
                        <Type>GroupButton</Type>
                        <Options>size=4</Options>
                        <ValueSpace>
                            <Value>
                                <Key>4</Key>
                                <Name>Superb 🎉</Name>
                            </Value>
                            <Value>
                                <Key>3</Key>
                                <Name>Good 😊</Name>
                            </Value>
                            <Value>
                                <Key>2</Key>
                                <Name>Ok 👍</Name>
                            </Value>
                            <Value>
                                <Key>1</Key>
                                <Name>Poor 🫤</Name>
                            </Value>
                        </ValueSpace>
                    </Widget>
                </Row>
                <Row>
                    <Name>Video Quality</Name>
                    <Widget>
                        <WidgetId>post_Video</WidgetId>
                        <Type>GroupButton</Type>
                        <Options>size=4</Options>
                        <ValueSpace>
                            <Value>
                                <Key>4</Key>
                                <Name>Superb 🎉</Name>
                            </Value>
                            <Value>
                                <Key>3</Key>
                                <Name>Good 😊</Name>
                            </Value>
                            <Value>
                                <Key>2</Key>
                                <Name>Ok 👍</Name>
                            </Value>
                            <Value>
                                <Key>1</Key>
                                <Name>Poor 🫤</Name>
                            </Value>
                        </ValueSpace>
                    </Widget>
                </Row>
                <Row>
                    <Name>Room Cleanliness</Name>
                    <Widget>
                        <WidgetId>post_Room</WidgetId>
                        <Type>GroupButton</Type>
                        <Options>size=4</Options>
                        <ValueSpace>
                            <Value>
                                <Key>4</Key>
                                <Name>Superb 🎉</Name>
                            </Value>
                            <Value>
                                <Key>3</Key>
                                <Name>Good 😊</Name>
                            </Value>
                            <Value>
                                <Key>2</Key>
                                <Name>Ok 👍</Name>
                            </Value>
                            <Value>
                                <Key>1</Key>
                                <Name>Poor 🫤</Name>
                            </Value>
                        </ValueSpace>
                    </Widget>
                </Row>
                <Row>
                    <Name/>
                    <Widget>
                        <WidgetId>post_Email_text</WidgetId>
                        <Name>[Enter Email] -- &gt;</Name>
                        <Type>Text</Type>
                        <Options>size=3;fontSize=normal;align=center</Options>
                    </Widget>
                    <Widget>
                        <WidgetId>post_Email_enter</WidgetId>
                        <Name>Enter</Name>
                        <Type>Button</Type>
                        <Options>size=1</Options>
                    </Widget>
                </Row>
                <Row>
                    <Name/>
                    <Widget>
                        <WidgetId>post_Submit</WidgetId>
                        <Name>Submit</Name>
                        <Type>Button</Type>
                        <Options>size=4</Options>
                    </Widget>
                </Row>
                <Options/>
            </Page>
        </Panel>
    </Extensions>
    ```
    
    <figure markdown="span">
      ![Saving the Panel extension](assets%2Fwx1_1451_part_4%2F4-5-3.png){ width="300" }
      <figcaption>Saving the Panel extension</figcaption>
    </figure>
    
    4.5.4 Scroll done to the bottom of the Arguments section and Select Execute
    
    <figure markdown="span">
      ![Execute](assets%2Fwx1_1451_part_4%2F4-5-4.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    You should see a response after execution to show it has been successful
    
    <figure markdown="span">
      ![Success](assets%2Fwx1_1451_part_4%2F4-5-4b.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        You should now see the Post_Meeting_Survey button on your device panel/display. 
        Next step is making our new custom button function.

### 4.6 Deploy Macro's via Control Hub

!!! abstract

    As it stand right now our new custom button does nothing. We are about to change that by adding 
    a macro that will act on the button being touched.

    An increasing number of customers are implementing macros and customizations. Without an 
    efficient deployment solution, it is improbable that customers will extend their custom 
    solutions beyond a handful of endpoints. Fortunately, Control Hub and CE-Deploy offer tools 
    that facilitate this process. Control Hub now has the capability to manage both UI and Macro 
    customizations on individual endpoints, while CE-Deploy can assist with bulk deployment.

??? webex "4.6 Exercises"
    
    4.6.1 Login to control hub with your lab admin credentials
    
    4.6.2 First step is to enable Control Hub to manage the devices macros. Select Devices->Settings
    
    4.6.3 Scroll down to the Macros section and toggle on -> Allow Control Hub to manage macros
    
    <figure markdown="span">
      ![Manage Macros](assets%2Fwx1_1451_part_4%2F4-6-3.png){ width="350" }
      <figcaption></figcaption>
    </figure>
    
    4.6.4 Next is to deploy our first macro to the Lab device
    
    4.6.5 Choose the lab device. Devices -> LabRoomBar/DeskPro(choose your lab device)
    
    4.6.6 You can now see that there are no macros deployed to this device 
    under Configuration -> Macros
    
    <figure markdown="span">
      ![Configuration->Macros](assets%2Fwx1_1451_part_4%2F4-6-6.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.6.7 Click on Macros
    
    4.6.8 Select Add Macro
    
    <figure markdown="span">
      ![Add Macro](assets%2Fwx1_1451_part_4%2F4-6-8.png){ width="350" }
      <figcaption></figcaption>
    </figure>
    
    4.6.9 Select -> Choose a File and navigate to Post_Meeting_Survey_Macro.js. If the file is not available 
    copy the javascript below, paste into a text editor of your choice and save it as a .js file named Post_Meeting_Survey_Macro.js.
    
    ```javascript title="Post_Meeting_Survey_Macro.js" linenums="1"
    import xapi from 'xapi';
    
    const star_rating_icon = '✪ ';
    
    xapi.Event.CallDisconnect.on(event => {
        setTimeout(Start_Survey, 1000)
    })
    
    let meetingScores = {
        Audio: 4,
        Video: 4,
        Room: 4
    }
    
    async function Start_Survey() {
        //Reset widget values
        meetingScores.Audio = 4
        meetingScores.Video = 4
        meetingScores.Room = 4
        await xapi.Command.UserInterface.Extensions.Widget.SetValue({ WidgetId: 'post_overall_text', Value: '- - - - -' });
        await xapi.Command.UserInterface.Extensions.Widget.SetValue({ WidgetId: 'post_Email_text', Value: '[Enter Email] -- >' });
    
        const buttons = ['post_Audio', 'post_Video', 'post_Room']
        for (let i = 0; i < buttons.length; i++) {
            await xapi.Command.UserInterface.Extensions.Widget.SetValue({ WidgetId: buttons[i], Value: 4 })
        }
    
        await xapi.Command.UserInterface.Message.Rating.Display({ Title: 'Rate your call?', Text: 'How would you rate your overall call experience?', FeedbackId: 'star_rating', Duration: 120 })
    }
    
    function Followup_Survey(rating) {
        xapi.Command.UserInterface.Message.Prompt.Display({
            Title: 'Tell us more of your Experience?',
            Text: `Would you like to take our extended survey so we can learn more about your ${star_rating_icon.repeat(rating)}experience?`,
            FeedbackId: 'extended_survey',
            "Option.1": 'Nah, I\'m Good',
            "Option.2": 'Sure, Happy to Help!'
        })
    }
    
    xapi.Event.UserInterface.Message.Rating.Response.on(event => {
        if (event.FeedbackId == 'star_rating') {
            xapi.Command.UserInterface.Extensions.Widget.SetValue({ WidgetId: 'post_overall_text', Value: `${star_rating_icon.repeat(parseInt(event.Rating))}` });
            if (parseInt(event.Rating) < 5) {
                Followup_Survey(parseInt(event.Rating))
            } else {
                xapi.Command.UserInterface.Message.Prompt.Display({ Title: `Awesome 🥳`, Text: 'Thanks for 5 Star Rating!<p>Have a Great Day!', Duration: 15 })
            }
        }
    
        if (event.FeedbackId == 'star_rating_change') {
            xapi.Command.UserInterface.Extensions.Widget.SetValue({ WidgetId: 'post_overall_text', Value: `${star_rating_icon.repeat(parseInt(event.Rating))}` });
        }
    })
    
    xapi.Event.UserInterface.Message.Prompt.Response.on(event => {
        if (event.FeedbackId == 'extended_survey' && event.OptionId == 2) {
            xapi.Command.UserInterface.Extensions.Panel.Open({ PanelId: 'Post_Meeting_Survey' })
        }
    })
    
    
    xapi.Event.UserInterface.Message.TextInput.Response.on(event => {
        if (event.FeedbackId == 'email') {
            xapi.Command.UserInterface.Extensions.Widget.SetValue({ WidgetId: 'post_Email_text', Value: event.Text })
        }
    })
    
    xapi.Event.UserInterface.Extensions.Widget.Action.on(event => {
        if (event.Type == 'released') {
            switch (event.WidgetId) {
                case 'post_overall_change':
                    xapi.Command.UserInterface.Message.Rating.Display({ Title: 'Rate your call?', Text: 'How would you rate your overall call experience?', FeedbackId: 'star_rating_change', Duration: 120 })
                    break;
                case 'post_Audio':
                    meetingScores.Audio = parseInt(event.Value)
                    break;
                case 'post_Video':
                    meetingScores.Video = parseInt(event.Value)
                    break;
                case 'post_Room':
                    meetingScores.Room = parseInt(event.Value)
                    break;
                case 'post_Email_enter':
                    xapi.Command.UserInterface.Message.TextInput.Display({ Title: 'Add your Email', Text: '(Optional) By providing your Email, we may follow up with you about your Meeting Room Experience', FeedbackId: 'email', Duration: 120 })
                    break;
                case 'post_Submit':
                    xapi.Command.UserInterface.Extensions.Panel.Close()
                    setTimeout(function () {
                        xapi.Command.UserInterface.Message.Prompt.Display({
                            Title: `Thanks for letting us know!`,
                            Text: `We appreciate your feedback and aim to do better next time<p>Room Score: ${meetingScores.Audio + meetingScores.Video + meetingScores.Room} out of 12`,
                            Duration: 15
                        })
                    }, 125)
                    break;
            }
        }
    })
    ```
    <figure markdown="span">
      ![Save Macro](assets%2Fwx1_1451_part_4%2F4-6-9.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.6.10 Click Next
    
    <figure markdown="span">
      ![Next](assets%2Fwx1_1451_part_4%2F4-6-10.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.6.11 Ensure that your Macro is enabled
    
    <figure markdown="span">
      ![Enable Macro](assets%2Fwx1_1451_part_4%2F4-6-11.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.6.12 Click Save. Then click Save again
    
    4.6.13 You should now see in the macro engine logs your macro is loaded without error.
    
    <figure markdown="span">
      ![Macro saved](assets%2Fwx1_1451_part_4%2F4-6-13.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.6.14 While still in the Macros lets make a change to our uploaded macro. 
    Click on the edit button.
    
    <figure markdown="span">
      ![Edit Macro](assets%2Fwx1_1451_part_4%2F4-6-14.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.6.15 Type the following line to the Macro on line 2.
    
    ```javascript
    console.log("Post Survey Macro Loading…..");
    ```
    Click save
    
    4.6.16 You should now notice in your logs that the console message now appears 
    as the macro is loaded.
    
    <figure markdown="span">
      ![Macro Log](assets%2Fwx1_1451_part_4%2F4-6-16.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Console logging is a great way to debug your macro’s in combination with the 
        macro engine log. To see your new Macro and Extension run try calling another pod and hang up.
        The Survey will appear after you hang up the call.

## 4.7 - 4.14 Deployment via CE-Deploy

!!! abstract

    Now that you have completed the Control Hub labs, it's time to explore another bulk configuration
    option with CE-Deploy. CE-Deploy is a free, third-party application designed to address gaps in 
    Control Hub's bulk configuration capabilities. As Control Hub has evolved, it has incorporated 
    new bulk options and features that were initially available only in CE-Deploy, such as branding 
    options. However, some features, like bulk macro management, are still unique to CE-Deploy. In 
    this series of labs, we will review some of the features that make CE-Deploy an excellent choice 
    for bulk management.

!!! important "CE-Deploy Install"

    Before we begin our lab you will need to download  and install CE-Deploy using the links below:

    Windows -> <a target="blank" href="https://github.com/voipnorm/CE-Deploy/releases/download/v12.4.1/CE-Deploy-Installer.12.4.1.exe">Windows Installer</a>

    Mac -> <a target="blank" href="https://github.com/voipnorm/CE-Deploy/releases/download/v12.4.1/CE-Deploy-12.4.1.dmg"> Mac Installer</a>

??? gif "Explore CE-Deploy"

    <figure markdown>
        ![Explore CE-Deploy](assets%2Fwx1_1451_part_4%2FCE-Deploy.gif)
    </figure>
    
??? vidcast "Intro to CE-Deploy"

    <div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
	<iframe src="https://app.vidcast.io/share/embed/17ab7118-5415-4557-886b-1b7b280dfcf3" width="100%" height="100%" title="CE-Deploy Welcome" frameborder="0" loading="lazy" allowfullscreen style="position:absolute; top:0; left: 0;border: solid; border-radius:12px;"></iframe>
    </div>

### 4.7 Download a Webex token and create an Environment in CE-Deploy

!!! abstract

    Environments enable an admin to download access and refresh tokens into CE-Deploys OS secure store, 
    which are refreshed daily. This feature is particularly useful for admins who need to access 
    multiple Control Hub instances. By utilizing environments, admins can streamline the deployment 
    process. Instead of logging into Webex everytime you need to perform a deployment you can simply select the appropriate 
    environment, load the token from the secure store, and perform the required deployment.

??? vidcast "Creating CE-Deploy Environments"

    <div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
	    <iframe src="https://app.vidcast.io/share/embed/8e846983-6528-46e9-9b95-7d1a3ae2f5b3" width="100%" height="100%" title="CE-Deploy Environments Training" frameborder="0" loading="lazy" allowfullscreen style="position:absolute; top:0; left: 0;border: solid; border-radius:12px;"></iframe>
    </div>

??? cedeploy "4.7 Exercises"

    4.7.1 Open CE-deploy and select the Download Webex Token button in the manage token section
    
    <figure markdown="span">
      ![Download Token](assets%2Fwx1_1451_part_4%2F5-1-1.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.7.2 Sign in to Webex and accept the integration permissions when prompted. This will load 
    your token and refresh token into the default environment. This is not a persistent environment 
    so will want to save our tokens into the secure store for repeated use.
    
    4.7.3 In the deployment features panel select =="Environment"==.
    
    <figure markdown="span">
      ![Environments](assets%2Fwx1_1451_part_4%2F5-1-3.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.7.4 In the environment name section, name your environment =="EnvLab"== and click =="save Environment"==.
    
    4.7.5 To load our new environment, use the dropdown in the Environment loading section and select your 
    new Environment  and select =="Load Environment"==.
    
    <figure markdown="span">
      ![Load Environment](assets%2Fwx1_1451_part_4%2F5-1-5.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.7.6 You should now see your environment name populate the Environment Loaded text under manage Token.
    
    <figure markdown="span">
      ![Loaded Environment](assets%2Fwx1_1451_part_4%2F5-1-6.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.7.7 To test your token click the =="Test Token"== button. You should see the response below:
    
    <figure markdown="span">
      ![Test Token](assets%2Fwx1_1451_part_4%2F5-1-7.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Congrats, your token is now downloaded, you are ready to roll.

### 4.8 Deploy xAPI commands via CE-Deploy

!!! abstract

    Deploying xAPI commands is a fundamental aspect of administering a Cisco collaboration endpoint 
    deployment. While Control Hub allows us to deploy commands to a single endpoint, scaling this 
    process to a larger deployment through Control Hub or a terminal command prompt can be 
    time-consuming and inefficient. By utilizing CE-Deploy, we can efficiently deploy xAPI commands 
    to multiple endpoints using various criteria such as IP Address, Control Hub Org ID, Control Hub 
    Tags, and more. This lab will demonstrate how to deploy a system time check across multiple devices. 
    Although this is not a configuration change, it will showcase how the CE-Deploy message console 
    provides real-time feedback as the deployment progresses.

??? vidcast "CE-Deploy Running xAPI Commands"

    <div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
    <iframe src="https://app.vidcast.io/share/embed/e0469f2c-5631-4a7a-a8aa-b15ecd84b4d3" width="100%" height="100%" title="CE-Deploy Running xAPI Commands" frameborder="0" loading="lazy" allowfullscreen style="position:absolute; top:0; left: 0;border: solid; border-radius:12px;"></iframe>
    </div>

??? cedeploy "4.8 Exercises"

    4.8.1 Open Ce-deploy and load the environment your created in the last lab.
    
    ??? cedeploy "Loading Environments"
    
        To load an environment, use the dropdown in the Environment loading section and select your
        new Environment and select ==Load Environment==.
    
    4.8.2 Select xAPI from the deployment section. In the command text box enter:
    
    ```text
    xCommand Time DateTime Get
    ```
    <figure markdown="span">
      ![Command](assets%2Fwx1_1451_part_4%2F5-2-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.8.3 Under the deployment options drop down select ==Org Id==, this will populate the lab org ID. 
    As this command does not make any system changes it can be safely run against all the devices
    in the lab Control Hub Organization. By doing this we can see how CE-Deploy queues and completes 
    xAPI commands in bulk.
    
    <figure markdown="span">
      ![Org ID Option](assets%2Fwx1_1451_part_4%2F5-2-3.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.8.4 Select the ==video devices only== filter checkbox. This will limit running the command to only 
    the xAPI capable device in the organization and no other devices in the lab, an example being a phone.
    
    4.8.5 Select =="Start Deployment"==
    
    4.8.6 Ensure ==Run Deployment Now== is selected and select ==Next==.
    
    4.8.7 If any devices are offline you may receive a prompt letting your know that some of the devices are offline. 
    If this is case just select =="Yes"==.
    
    4.8.8 The message console will now let you see the deployment in progress and all output from the devices. 
    In this case what is returned is the system time running on the endpoints.
    
    <figure markdown="span">
      ![Message Console](assets%2Fwx1_1451_part_4%2F5-2-8.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        This concludes this section. While this is a simple use case, any xAPI command can be run in this fashion 
        including multiline commands that contain a body section.

    ??? challenge "Running a xStatus Command"

        Now that you know how to run a xCommand, can you work out how to run a xStatus command?
        
        Find a command at [RoomOS](roomos.cisco.com)

### 4.9 Deploy Branding via CE-Deploy

!!! abstract

    Similar to deploying xAPI commands, using CE-Deploy for branding offers unique advantages over 
    using Control Hub. While Control Hub allows for organization-wide branding, CE-Deploy provides 
    greater granularity, enabling deployment down to a single endpoint via a CSV file. This is 
    particularly useful if you have unique QR codes for each endpoint, as you can deliver the images 
    through CE-Deploy using a CSV file, rather than manually deploying them to each endpoint. In 
    this lab, we will deploy a branding image along with a QR code as a logo, helping your users 
    easily access a website of your choosing.

    The widespread adoption of QR codes has introduced unique advantages to branding. While
    it's commonly perceived that branding primarily involves displaying a company's logo on various
    devices, the integration of QR codes can significantly enhance this strategy. By combining branding
    with QR codes, companies can establish a dynamic communication channel with users directly through
    the devices they hold. In this exercise, we will create a QR code that will serve as a branding logo.
    This QR code will provide users with access to information they can conveniently take with them when
    they leave the room.

??? cedeploy "4.9 Exercises"

    4.9.1 Open CE-Deploy and load the environment your created in a previous lab.
    
    ??? cedeploy "Loading Environments"
    
        To load an environment, use the dropdown in the Environment loading section and select your
        new Environment and select ==Load Environment==.
    
    4.9.2 In this lab we will be load a background and logo on to our lab device but to help us do that first 
    we must create a tag for your pod's device in Control Hub. Log into the lab control hub instance and find your device. 
    Remember this Control Hub instance is for the entire lab so choosing your pod's device is important as we only want 
    to make changes to just your device.
    
    [Control Hub admin login](https://admin.webex.com/)
    
    4.9.3 Add a tag using your pod ID similar to ==podXXX== format.
    
    <figure markdown="span">
      ![Add Tag](assets%2Fwx1_1451_part_4%2F5-3-3.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    After typing in the tag press enter. The tag will be saved once you press enter.
    
    Now we have a tag added in Control Hub it will be easier to filter to just your device in CE-Deploy as we explore more options.
    
    4.9.4 It is now time to create a unique QR code using CE-Deploy. Open CE-Deploy from the deployment options select 
    ==Tools->QRCode==.
    
    <figure markdown="span">
      ![QRCode Panel](assets%2Fwx1_1451_part_4%2F4-9-4.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.9.5 In the QR URL text box enter
    
    ```text
    https://www.webexone.com/
    ```
    Feel free to adjust the QR Code color palette to your liking or add a center image.
    
    Other options that are available include adding Banner Text or using the QR Code on a background image but 
    today we are using the QR code as a logo.
    
    ??? vidcast "CE-Deploy QR Code"
    
        <div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
        <iframe src="https://app.vidcast.io/share/embed/02286d09-5585-4a24-9f93-dadd3d0e3e13" width="100%" height="100%" title="CE-Deploy QR Code Feature" frameborder="0" loading="lazy" allowfullscreen style="position:absolute; top:0; left: 0;border: solid; border-radius:12px;"></iframe>
        </div>
    
    4.9.6 Once you have picked your options select ==Process QRCode==.
    
    <figure markdown="span">
      ![QRCode](assets%2Fwx1_1451_part_4%2F4-9-6.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    Everytime you select ==Process QRCode== a new QR Code file is generated with a timestamp embedded in the name.
    For example code-09_47_51_582.jpeg. Feel free to generate as many codes as you like, you will need to pick one for the next step.
    
    4.9.7 Once you see the preview of your QR Code select the ==Open QR File== button. 
    Take note of the location of the QR Code or copy and paste the QR code file 
    somewhere you can easily find for the next step.
    
    4.9.8 Next we are going to use the ==Personalization->Branding== deployment option.
    
    <figure markdown="span">
      ![Branding panel](assets%2Fwx1_1451_part_4%2F4-9-8.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    Click Browse on the ==Logo Awake State File==. Find your QR Logo and select it using the file picker.
    Next click Browse on the ==Logo HalfWake State File==. Find your QR logo and select it using the file picker.
    Once both file are selected it should look like the screenshot below.
    
    <figure markdown="span">
      ![Loading files](assets%2Fwx1_1451_part_4%2F4-9-8b.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.9.9 In the ==Deployment Options== section dropdown select ==Tags== and enter your pod tag in the text box
    
    <figure markdown="span">
      ![Deployment Options](assets%2Fwx1_1451_part_4%2F4-9-9a.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.9.10 Ensure the ==Video Devices Only== checkbox is checked.
    
    4.9.11 Press button Start Deployment.
    
    4.9.12 Ensure the ==Scheduler== has the ==Run Deployment Now== check box selected and click ==Next==.
    
    4.9.13 The Message Console will now appear, you can follow along the deployment process.
    
    <figure markdown="span">
      ![Message Console](assets%2Fwx1_1451_part_4%2F4-9-13.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Congrats you just deployed your QR file as a logo using branding to your endpoint. You should now see
        the QR on the screen of your endpoint home screen. This was a pretty simple example, but as you can imagine 
        if you have 100's or 1000's of endpoints to deploy new branding assets to this could save 
        hours of work. By using tags to deploy your branding you can now see how effect filtering is. 
        You could deploy unique branding assets to different devices based on the tags you create.

### 4.10 Deploy Macros via CE-Deploy

!!! abstract

    Macros enhance your customization capabilities, allowing you to tailor your experience exactly 
    as you want it. However, deploying these macros can be challenging, especially when dealing 
    with multiple endpoints. While Control Hub supports single-endpoint deployment, this approach 
    becomes cumbersome and time-consuming for larger deployments. With CE-Deploy, you can roll out 
    a macro in minutes to hundreds or even thousands of endpoints. The CE-Deploy Macro Factory also 
    enables you to monitor your deployment for consistency and performance without needing to log 
    into the endpoint admin portal or control hub. Additionally, you can write your macro code 
    directly in CE-Deploy and deploy it in just a few easy steps. In this lab, we will write a new 
    macro, save it, and deploy it to your endpoints. We will then use the Macro Factory  to monitor 
    the rollout of everyone's macros.

??? vidcast "CE-Deploy Macro deployment and the Macro Factory"

    <div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
	    <iframe src="https://app.vidcast.io/share/embed/5a2a7a03-441a-48d4-afa9-4dccc47c48c3" width="100%" height="100%" title="CE-Deploy Macro Deployment and the Macro Factory" frameborder="0" loading="lazy" allowfullscreen style="position:absolute; top:0; left: 0;border: solid; border-radius:12px;"></iframe>
    </div>

??? cedeploy "4.10 Exercises"

    4.10.1 Open CE-Deploy and load your environment you created in the previous lab
    
    ??? cedeploy "Loading Environments"
    
        To load an environment, use the dropdown in the Environment loading section and select your
        new Environment and select ==Load Environment==.
    
    Then select ==Design->Macro Editor== from the main menu
    
    <figure markdown="span">
      ![Macro Editor](assets%2Fwx1_1451_part_4%2F5-4-1.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.10.2 Copy the following code and paste it into the editor page and save the file as ==LaunchHalfwake.js==
    
    ```Javascript title="LaunchHalfwake.js" linenums="1"
    import xapi from 'xapi';
    
    xapi.Event.UserInterface.Extensions.Panel.Clicked.on((e) => {
      if (e.PanelId === 'halfwake') {
        xapi.Command.Standby.Halfwake();
      }
    });
    ```
    Once completed it should look like the screenshot below.
    
    <figure markdown="span">
      ![Macro Editor with Macro](assets%2Fwx1_1451_part_4%2F4-10-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.10.3 Click ==Save File==.
    
    4.10.4 Name your file ==LaunchHalfwake.js== and click ==Save==
    
    4.10.5 Exit the Macro Editor.
    
    4.10.6 Select ==Customizations->Macros== from the deployment features panel.
    
    4.10.7 Using the Macros deployment feature we can easily deploy a macro to hundreds of endpoints in minutes.
    Name your macro LaunchHalfwake and use the Macro Javascript File Browse button to select 
    the js file you create just moments ago.
    
    Ensure the ==Activate on deployment== checkbox is selected.
    
    4.10.8 Under deployment Options use the dropdown to select Tags and enter your pod tag for your device.
    
    <figure markdown="span">
      ![Deployment Options](assets%2Fwx1_1451_part_4%2F4-9-9a.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.10.9 Again ensure the ==Video Devices Only== checkbox is selected.
    
    4.10.10 Press button Start Deployment.
    
    4.10.11 Ensure the ==Scheduler== has the ==Run Deployment Now== check box selected and click ==Next==.
    
    4.10.12 The Message Console will now appear, you can follow along the deployment process.
    
    <figure markdown="span">
      ![Message Console](assets%2Fwx1_1451_part_4%2F4-10-12.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    4.10.13 You just deployed a macro to your device and activated it, we still need one more step 
    to ensure that it is in fact running. Unlike the device web admin portal which will restart the macro engine
    automatically everytime a change is made to a macro the APIs are not as polite. So in the next step
    we will use CE-Deploy xCommand to restart the endpoint macro engine.
    
    4.10.14 Open the deployment panel xAPI->Command feature and enter the restart command:
    
    ```text
    xCommand Macros Runtime Restart
    ```
    <figure markdown="span">
      ![xCommand](assets%2Fwx1_1451_part_4%2F4-10-15.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.10.15 Under deployment Options use the dropdown to select Tags and enter your pod tag for your device.
    
    <figure markdown="span">
      ![Deployment Options](assets%2Fwx1_1451_part_4%2F4-9-9a.png) { width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.10.16 Ensure the ==Video Devices Only== checkbox is checked.
    
    4.10.17 Press button Start Deployment.
    
    4.10.18 Ensure the ==Scheduler== has the ==Run Deployment Now== check box selected and click ==Next==.
    
    4.10.19 The Message Console will now appear, you can follow along the deployment process.
    
    4.10.20 We have our macro rolled out across all our endpoints but lets checkin on the other pods and see how they 
    doing. We are going to use the Macro Factory to monitor how the other pods are doing. In the deployment panel
    select the Dashboards. Do not select the Macro Factory just yet. First we need to select our deployment option.
    
    <figure markdown="span">
      ![Dashboards](assets%2Fwx1_1451_part_4%2F4-10-21.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.10.21 This time around we are going to select the ==Org Id==
    
    <figure markdown="span">
      ![Org ID](assets%2Fwx1_1451_part_4%2F4-10-22.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    When you select Org Id, the id automatically populates for our lab Control Hub org.
    
    4.10.22 Select the Macro Factory from the Dashboards
    
    <figure markdown="span">
      ![MacroFactory](assets%2Fwx1_1451_part_4%2F4-10-24.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    You should now see the Macro Factory appear with all the pod endpoints that have added their macros.
    
    <figure markdown="span">
      ![MF Window](assets%2Fwx1_1451_part_4%2F4-10-24b.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    Take a look around. Keep it open and move the window to the side when done. We are going to 
    use the Macro Factory to clean up later.

    !!! Success

        Now that we have our macro deployed we will turn our attention to deploying the accompanying
        extension to make it work.

    ??? challenge "Macro Factory Add a Macro"
        
        Can you load or remove a different Macro from an earlier lab? Have a go, its easy.

!!! Tip
    
    Things to note for the Macro Factory.

    1. Visual way to monitor macros
    2. Easy to use buttons, no need to remember commands
    3. Great for managment of a few endpoints adding, removing and activating macros
    4. For large bulk rollouts of Macros using the Deployment panel Customizations->Macros is a better option

### 4.11 Deploy Extensions via CE-Deploy

!!! abstract

    Extensions enable companies to enhance and personalize the user experience. These extensions 
    can be deployed through Control Hub or CE-deploy. In this lab, we will deploy an extension to 
    accompany our macro from the last lab.

??? cedeploy "4.11 Exercises"

    4.11.1 Open CE-Deploy and load your environment you created in the previous lab if it's not already loaded
    
    ??? Tip "Loading Environments"
    
        To load an environment, use the dropdown in the Environment loading section and select your
        new Environment and select ==Load Environment==.
    
    Then select ==Design->Macro Editor== from the main menu
    
    <figure markdown="span">
      ![Macro Editor](assets%2Fwx1_1451_part_4%2F5-4-1.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.11.2 The Macro Editor can also be used to create our XML file. Copy the text below and paste it into 
    the Macro Editor and save the file as ==LaunchHalfwake.xml==. Be sure to change the default extension from 
    .js to .xml
    
    ```xml title="LaunchHalfwake.xml" linenums="1"
    <Extensions>
      <Version>1.8</Version>
      <Panel>
        <Order>1</Order>
        <PanelId>halfwake</PanelId>
        <Origin>local</Origin>
        <Type>Home</Type>
        <Icon>Power</Icon>
        <Color>#07C1E4</Color>
        <Name>HalfWake</Name>
        <ActivityType>Custom</ActivityType>
      </Panel>
    </Extensions>
    ```
    It should look something like this:
    
    <figure markdown="span">
      ![XML File](assets%2Fwx1_1451_part_4%2F4-11-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.11.3 Now we have our xml file lets role it out to our endpoint. For a single panel in the deployment panel select 
    ==Customizations->UIExtensions->Panel==. This allows ot deploy or update a single panel.
    
    <figure markdown="span">
      ![Add a Panel](assets%2Fwx1_1451_part_4%2F4-11-3.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    !!! Tip
        
        When deploying a single panel using the same panel ID will create a new panel the first time, but subsequent 
        uses of the same ID will overwrite existing panels. 
        
        To update more than 1 panel use the Customizations->UIExtensions->Config deployment panel feature.
        This allows the upload of xml files that contain multiple panels.
    
    4.11.4 In the panel ID text box enter ==halfwake== as the panel ID. Using the Browse file picker select your 
    xml file you created in the last step.
    
    <figure markdown="span">
      ![Panel Details](assets%2Fwx1_1451_part_4%2F4-11-4.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.11.5 Under deployment Options use the dropdown to select Tags and enter your pod tag for your device.
    
    <figure markdown="span">
      ![Tag Options](assets%2Fwx1_1451_part_4%2F4-9-9a.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.11.6 Ensure the ==Video Devices Only== checkbox is checked.
    
    !!! warning
    
        An error may occur if this check box is not selected. Just make sure that it is checked
        if you receive an error while deploying.
    
    4.11.7 Press button Start Deployment.
    
    4.11.8 Ensure the ==Scheduler== has the ==Run Deployment Now== check box selected and click ==Next==.
    
    4.11.9 The Message Console will now appear, you can follow along the deployment process.

    !!! Success
    
        Its test time. The halfwake button should now appear on your home screen of your device. 
        Pressing the button should place your endpoint into the halfwake state.

### 4.12 Deploy a local user admin using CE-Deploy

!!! abstract

    A local user admin account allows direct access to the device without needing to go through 
    its web portal via Control Hub or the cloud xAPI. Some tasks and configuration options are not available 
    via the cloud, so having a local admin account provides a way to set configurations 
    and manage personal mode devices. Typically, setting up a new cloud device removes local 
    admin accounts, making the device's web portal accessible only through Control Hub. In this lab,
    you will add a new local admin account to the device via the cloud xAPI using CE-Deploy. 

??? cedeploy "4.12 Exercises"
    
    4.12.1 Open CE-Deploy and load your environment you created in the previous lab
    
    ??? Tip "Loading Environments"
    
        To load an environment, use the dropdown in the Environment loading section and select your
        new Environment and select ==Load Environment==.
    
    Then select ==Users== from the deployment panel
    
    <figure markdown="span">
      ![Users](assets%2Fwx1_1451_part_4%2F4-12-1.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    !!! Tip "Device Users"
        
        Device users allows us to add, delete and modify device users via the cloud xAPI in CE-Deploy. If you doing
        integrations with 3rd party's, setting configurations or doing device backups having a local admin 
        account on the device may be critical for day to day operations. CE-Deploy can access a device by the
        IP address to take advantage of the local admin account. 
    
    4.12.2 Set the following setting.
    
    
    | `Setting`            | <!-- -->                |
    |----------------------|-------------------------|
    | `Device User Action` | Add                     |
    | `Username`           | userxxx(yourPodNumber)  |
    | `Passphrase`         | Cisco12345              |
    | `User Role`          | Admin, User, Integrator |
    | `PassPhase Change`   | No                      |
    | `Shell Login`        | Yes                     |
    | `Activate Account`   | Yes                     |
    
    
    <figure markdown="span">
      ![User Options](assets%2Fwx1_1451_part_4%2F4-12-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.12.3 Under deployment Options use the dropdown to select Tags and enter your pod tag for your device.
    
    <figure markdown="span">
      ![Tag Options](assets%2Fwx1_1451_part_4%2F4-9-9a.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.12.4 Ensure the ==Video Devices Only== checkbox is checked.
    
    4.12.5 Press button ==Start Deployment==.
    
    4.12.6 Ensure the ==Scheduler== has the ==Run Deployment Now== check box selected and click ==Next==.
    
    4.12.7 The Message Console will now appear, you can follow along the deployment process.
    
    !!! challenge "Network IP Address Challenge"
        
        In the next portion of the lab you will need the IP address of your pods endpoint. Using the 
        command below in CE-Deploy can you retrieve your IP?

        ```text
            xStatus Network[1] IPv4 Address
        ```
    
    4.12.8 To test the local admin account we are going to switch CE-Deploy into local mode from cloud
    and run an xAPI command directly to the device.
    
    Select the cloud/local toggle in the main navigation bar.
    
    <figure markdown="span">
      ![Toggle](assets%2Fwx1_1451_part_4%2F4-12-8a.png){ width="150" }
      <figcaption></figcaption>
    </figure>
    
    Ensure that it is set to local and the interface updates:
    
    <figure markdown="span">
      ![Local Interface](assets%2Fwx1_1451_part_4%2F4-12-8b.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    Now we can use the IP address of the device to send commands.
    
    4.12.9 Using the IP address from the IP challenge  and your new local admin username and password
    enter the details as shown along with the command:
    
    ```text
    xCommand time datetime get
    ```
    
    <figure markdown="span">
      ![xCOmmand](assets%2Fwx1_1451_part_4%2F4-12-9.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.12.10 Click on ==Start Deployment==
    
    4.12.11 Ensure the ==Scheduler== has the ==Run Deployment Now== check box selected and click ==Next==.
    
    4.12.13 The Message Console will now appear, you can follow along the deployment process.
    
    <figure markdown="span">
      ![Message Console](assets%2Fwx1_1451_part_4%2F4-12-12.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        All done. Congrats, you have now seen the most commonly used functions in CE-Deploy, but there 
        is still plenty to explore. Stay on the local tab as we dive in deep to some lesser known features.

### 4.13 Deploy xAPI command via the shell using CE-Deploy

!!! abstract

    The terminal is not only a crucial tool for administering Cisco collaboration endpoints 
    but also an important resource for exploring xAPIs. In this lab, we will use CE-Deploy's 
    terminal emulation feature to run a command. CE-Deploy is the swiss army knife of video endpoint
    deployments so lets keep exploring.

??? cedeploy "4.13 Exercises"

    4.13.1 From the ==local interface== in the deployment panel select ==Tools->SSH-TTY==.
    
    <figure markdown="span">
      ![SSH Options](assets%2Fwx1_1451_part_4%2F4-13-1.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! warning

        This lab will only work if the endpoint and your PC/MAC running CE-Deploy are on the same 
        network.
    
    4.13.2  Add your endpoint local admin details, choose a theme and add the IP address 
    from the IP address challenge. 
    
    <figure markdown="span">
      ![SSH Window Options](assets%2Fwx1_1451_part_4%2F4-13-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.13.3 Select ==Connect==. The terminal will appear in a new Window and you can start 
    interacting with it.
    
    <figure markdown="span">
      ![Window](assets%2Fwx1_1451_part_4%2F4-13-3.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    !!! Success
    
        Once you have tried a few commands type in ==Bye== command and the window 
        will automatically close.

### 4.14 Perform a device backup and download logs using CE-Deploy

!!! abstract

    In our final deployment lab, we will perform a backup of your endpoint using CE-Deploy and download the logs. 
    This backup will include all settings, macros, backgrounds, and extensions. 
    Having a backup of all your endpoints can be invaluable when you need to replace or restore a device.

??? cedeploy "4.14 Exercises Part 1"
    
    4.14.1 Open CE-Deploy and ensure you are in local mode and then select ==Backups== from the deployment panel
    
    !!! warning
    
        This lab will only work if the endpoint and your PC/MAC running CE-Deploy are on the same 
        network.
    
    4.14.2 Enter your local admin user credentials and select single device and enter the IP address
    of your endpoint.
    
    <figure markdown="span">
      ![Backup Panel](assets%2Fwx1_1451_part_4%2F4-14-2.png){ width="300" }
      <figcaption></figcaption>
    </figure>
    
    4.14.3 Ensure the ==Download endpoint backups== checkbox is selected in Backups panel.
    
    4.14.4 Select ==Start Deployment==. The message console will now show the file location of the downloaded
    backup from the endpoint.
    
    <figure markdown="span">
      ![Message Console](assets%2Fwx1_1451_part_4%2F4-14-4.png){ width="300" }
      <figcaption>Message Console</figcaption>
    </figure>
    
    4.14.5 To open the file location go to the application Tools->Backup Files. This wiill open the directory
    where all the backup files are stored.
    
    <figure markdown="span">
      ![App menu](assets%2Fwx1_1451_part_4%2F4-14-5.png){ width="300" }
      <figcaption></figcaption>
    </figure>

    ??? Tip
    
        If you want a more configurable option the web admin portal of the device will allow customization
        of the device backup you can download from the device. CE-Deploy will only download an entire backup ignoring any options from the 
        web admin portal.

    !!! Success
        
        What you will find is a full back up of the device in a zip file. Feel free to unzip
        the file and explore what was backed up on your endpoint.
        <figure markdown="span">
          ![Backup File Unzipped](assets%2Fwx1_1451_part_4%2F4-14-6.png){ width="300" }
          <figcaption>Backup File Unzipped</figcaption>
        </figure>

??? cedeploy "4.14 Exercises Part 2"

    !!! Tip

        Ever been asked to download the logs from a endpoint for TAC. Well now you can download all the logs
        in one simple step. If you are required to download logs from more than one endpoint try the CSV option 
        where you can enter a list of IP addresses to download logs from multiple endpoints.
    
    4.14.7 Open CE-Deploy and ensure you are in local mode and then select ==Logs== from the deployment panel
    
    !!! warning
    
        This lab will only work if the endpoint and your PC/MAC running CE-Deploy are on the same 
        network.
    
    4.14.8 Select ==Download endpoint logs==

    <figure markdown="span">
        ![Logs Panel](assets%2Fwx1_1451_part_4%2F4-14-8.png){ width="300" }
    </figure>

    4.14.9 Select ==Start Deployment==. The message console will now show the file location of the downloaded
    logs from the endpoint.
    
    4.14.10 To open the file location go to the application Tools->Downloaded and CSV Files Files. This wiill open the directory
    where all the log files are stored. Log file naming convention will follow log_bundle-SEP<mac>-<timestamp>.tar.gz.

    <figure markdown="span">
        ![Message Console](assets%2Fwx1_1451_part_4%2F4-14-10.png){ width="300" }
    </figure>

    !!! Success

        Well done. You have explored the main features of CE-Deploy and a few lesser known ones. Feel free
        to explore and see what else it can do. CE-Deploy is built on public API's freely available to everyone
        to develop your own solutions and scripts.